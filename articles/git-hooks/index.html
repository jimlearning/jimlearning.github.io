<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"/><meta name="og:site_name" content="JimLearningBlog"/><link rel="canonical" href="https://jimlearning.github.io/articles/git-hooks"/><meta name="twitter:url" content="https://jimlearning.github.io/articles/git-hooks"/><meta name="og:url" content="https://jimlearning.github.io/articles/git-hooks"/><title>Git pre-commit hook for Linting RESTful API Modelling Language (RAML) | JimLearningBlog</title><meta name="twitter:title" content="Git pre-commit hook for Linting RESTful API Modelling Language (RAML) | JimLearningBlog"/><meta name="og:title" content="Git pre-commit hook for Linting RESTful API Modelling Language (RAML) | JimLearningBlog"/><meta name="description" content="Continuous Integration (CI) is a practice that requires developers to push code into a shared repository several times a day. When pushing our code to a shared repository, we should strive to ensure that our code is syntactically correct and builds so that other developers can grab the latest copy and begin iterating upon it easily. Today we are going to look at this principle and how we can easily identify and correct common coding mistakes when designing Service Contracts for Application Programming Interfaces (APIs). Specifically, we will explore how we can use Git hooks as a mechanism for ensuring a RAML Service Contract is valid using a Linter called RAML Enforcer."/><meta name="twitter:description" content="Continuous Integration (CI) is a practice that requires developers to push code into a shared repository several times a day. When pushing our code to a shared repository, we should strive to ensure that our code is syntactically correct and builds so that other developers can grab the latest copy and begin iterating upon it easily. Today we are going to look at this principle and how we can easily identify and correct common coding mistakes when designing Service Contracts for Application Programming Interfaces (APIs). Specifically, we will explore how we can use Git hooks as a mechanism for ensuring a RAML Service Contract is valid using a Linter called RAML Enforcer."/><meta name="og:description" content="Continuous Integration (CI) is a practice that requires developers to push code into a shared repository several times a day. When pushing our code to a shared repository, we should strive to ensure that our code is syntactically correct and builds so that other developers can grab the latest copy and begin iterating upon it easily. Today we are going to look at this principle and how we can easily identify and correct common coding mistakes when designing Service Contracts for Application Programming Interfaces (APIs). Specifically, we will explore how we can use Git hooks as a mechanism for ensuring a RAML Service Contract is valid using a Linter called RAML Enforcer."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to JimLearningBlog"/></head><head><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karla:400,400i,700,700i"/><link rel="stylesheet" href="/PersonalTheme/fontawesome/all.min.css"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">JimLearningBlog</a><p>A description of JimLearningBlog</p><nav><ul><li><a href="/posts"><span></span>Posts</a></li><li><a class="selected" href="/articles"><span class="far fa-newspaper"></span>Articles</a></li><li><a href="/tips"><span class="far fa-star"></span>Tips</a></li><li><a href="/apps"><span></span>Apps</a></li><li><a href="/tags"><span class="fas fa-hashtag"></span>Tags</a></li><li><a href="/about"><span class="far fa-user"></span>About Me</a></li></ul></nav></div></header><div class="wrapper"><article class="animated fadeIn"><span class="date">Published on 2019å¹´05æœˆ18æ—¥.</span><span class="read-time">ðŸ•‘ 2 minutes read.</span><h1>Git pre-commit hook for Linting RESTful API Modelling Language (RAML)</h1><ul class="tag-list"><li class="tag variant-0"><a href="/tags/articles">Articles</a></li><li class="tag variant-8"><a href="/tags/linting">Linting</a></li><li class="tag variant-4"><a href="/tags/git">Git</a></li><li class="tag variant-2"><a href="/tags/cicd">CI/CD</a></li><li class="tag variant-13"><a href="/tags/raml">RAML</a></li></ul><p>Continuous Integration (CI) is a practice that requires developers to push code into a shared repository several times a day. When pushing our code to a shared repository, we should strive to ensure that our code is syntactically correct and builds so that other developers can grab the latest copy and begin iterating upon it easily. Today we are going to look at this principle and how we can easily identify and correct common coding mistakes when designing Service Contracts for Application Programming Interfaces (APIs). Specifically, we will explore how we can use Git hooks as a mechanism for ensuring a RAML Service Contract is valid using a Linter called RAML Enforcer.</p><div class="content"><h2>What is RAML Enforcer?</h2><p><em>RAML Enforcer</em> is a Linter which can be used to examine source code for programatic errors, bugs, stylistic errors or suspicious patterns. In a CI toolchain, <em>Linting</em> is performed very early in the workflow, usually prior to running unit tests or integrating code into a shared repository. <em>RAML Enforcer</em> is configurable through command line arguments and provides developers with the option to select from a set of prepackaged rules to enforce coding standards. In this case, we are interested in automatically checking our Service Contract for programatic errors and bugs prior to committing any changes.</p><h2>How can RAML Enforcer be run automatically?</h2><p>Git has a mechanism for triggering scripts when interesting events occur, called hooks. There are two main categories of hooks, client side and server side. To address our goal of checking the quality of our RAML before integrating it into our local version control repository, we will look at using a local pre-commit hook. So.. what is a pre-commit hook, you ask? A pre-commit hook is a script that Git executes before committing staged files in the repository. In this case it will allow us to inspect the snapshot thatâ€™s about to be committed and see if it meets our code quality standards. Pre-commit hooks reside in local repositories within the <code>.git/hooks</code> directory.</p><p>Assuming that you already have a Git repository that contains a RAML Service Contract that youâ€™d like to <em>Lint</em>, let's begin by navigating to the <code>.git/hooks</code> directory and creating a file called <code>pre-commit</code><code></code>. Add the following contents to the file, replacing <code>&lt;main-raml-file-path&gt;</code> with the path to your main RAML file:</p><pre><code>#!/bin/sh
echo <span class="string">"# Running RAML Enforcer"</span>
sudo docker run \
  --<span class="keyword">init</span> --rm \
  --volume $(pwd):/tmp <span class="string">"mikeyryan/raml-enforcer:latest"</span> \
  /tmp/&lt;main-raml-file-path&gt;
</code></pre><p>Hooks need to be executable, so you may need to change the file permissions of <code>pre-commit</code> if you're creating it from scratch. You can do so by running the following command:</p><pre><code>chmod +x pre-commit
</code></pre><h2>Seeing it in action</h2><p>Now that we have a pre-commit hook in place for our repository, lets see how it looks! Make a change to your RAML Service Contract, then try and commit it. You should see a report like this printed to the screen:</p><img src="/images/posts/git-hook-linter-commit.svg" alt="Git hook screenshot"/><p>When <em>RAML Enforcer</em> detects that the Service Contract contains errors or does not meet code standards, it prevents your staged files from being committed.</p><h2>Further reading</h2><ul><li><a href="https://www.atlassian.com/git/tutorials/git-hooks">Atlassian - Git hooks</a></li><li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">Customising Git - Git Hooks</a></li></ul><p class="footer">Thanks for reading! ðŸš€</p></div><ul class="share grid compact"><li><a class="twitter" href="https://twitter.com/intent/tweet?via=MikeRyanGough&text=Git%20pre-commit%20hook%20for%20Linting%20RESTful%20API%20Modelling%20Language%20(RAML)&url=https://jimlearning.github.ioarticles/git-hooks">Share on Twitter</a></li><li><a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://jimlearning.github.ioarticles/git-hooks">Share on Facebook</a></li><li><a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&&titleGit%20pre-commit%20hook%20for%20Linting%20RESTful%20API%20Modelling%20Language%20(RAML)=&summary=&source=&url=https://jimlearning.github.ioarticles/git-hooks">Share on LinkedIn</a></li></ul></article></div><footer class="animated fadeIn"><p>Mike Gough Â© 2020.</p><p>Powered by <a href="https://github.com/johnsundell/publish">Publish</a> and hosted on <a href="https://github.com/Mike-Gough/Mike-Gough.github.io">GitHub Pages</a>. 100% JavaScript-free.</p><p>Notice a broken link or other issue? <a href="https://github.com/Mike-Gough/Mike-Gough.github.io/issues">Open an issue!</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>