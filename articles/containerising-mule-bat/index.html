<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"/><meta name="og:site_name" content="JimLearningBlog"/><link rel="canonical" href="https://jimlearning.github.io/articles/containerising-mule-bat"/><meta name="twitter:url" content="https://jimlearning.github.io/articles/containerising-mule-bat"/><meta name="og:url" content="https://jimlearning.github.io/articles/containerising-mule-bat"/><title>Containerising MuleSoft's Blackbox Automated Testing (BAT) CLI tool | JimLearningBlog</title><meta name="twitter:title" content="Containerising MuleSoft's Blackbox Automated Testing (BAT) CLI tool | JimLearningBlog"/><meta name="og:title" content="Containerising MuleSoft's Blackbox Automated Testing (BAT) CLI tool | JimLearningBlog"/><meta name="description" content="In this post we will assume that you have Docker and would like to create an image that contains the Blackbox Automated testing (BAT) application published by Mulesoft."/><meta name="twitter:description" content="In this post we will assume that you have Docker and would like to create an image that contains the Blackbox Automated testing (BAT) application published by Mulesoft."/><meta name="og:description" content="In this post we will assume that you have Docker and would like to create an image that contains the Blackbox Automated testing (BAT) application published by Mulesoft."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to JimLearningBlog"/></head><head><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karla:400,400i,700,700i"/><link rel="stylesheet" href="/PersonalTheme/fontawesome/all.min.css"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">JimLearningBlog</a><p>A description of JimLearningBlog</p><nav><ul><li><a href="/posts"><span></span>Posts</a></li><li><a class="selected" href="/articles"><span class="far fa-newspaper"></span>Articles</a></li><li><a href="/tips"><span class="far fa-star"></span>Tips</a></li><li><a href="/apps"><span></span>Apps</a></li><li><a href="/tags"><span class="fas fa-hashtag"></span>Tags</a></li><li><a href="/about"><span class="far fa-user"></span>About Me</a></li></ul></nav></div></header><div class="wrapper"><article class="animated fadeIn"><span class="date">Published on 2019å¹´06æœˆ22æ—¥.</span><span class="read-time">ðŸ•‘ 2 minutes read.</span><h1>Containerising MuleSoft's Blackbox Automated Testing (BAT) CLI tool</h1><ul class="tag-list"><li class="tag variant-0"><a href="/tags/articles">Articles</a></li><li class="tag variant-3"><a href="/tags/docker">Docker</a></li><li class="tag variant-11"><a href="/tags/mule-esb">Mule ESB</a></li></ul><p>In this post we will assume that you have Docker and would like to create an image that contains the Blackbox Automated testing (BAT) application published by Mulesoft.</p><div class="content"><p>If you're looking for a Mule Docker image you can use without making your own, then you can check out <a href="https://hub.docker.com/r/mikeyryan/mule-blackbox-automated-testing">mikeyryan/mule-blackbox-automated-testing</a> on Docker Hub.</p><h2>What is BAT?</h2><img src="/images/posts/mulesoft-logo.svg" alt="MuleSoft logo"/><p>The BAT CLI is an API Functional Monitoring tool produced by MuleSoft for assuring the quality and reliablility of APIs. It provides a convenient method for those working in the MuleSoft technology stack to implement Black-box testing and Runtime monitoring. Using dataweave, it is possible to develop tests that validate the behavior of APIs against live upstream systems, based on inputs and outputs. Additionally, it has a monitoring capability that allows you to verify that deployed APIs are operating as expected and output test results in a variety of formats as a once off operation or on a schedule.</p><h2>Why Containerise BAT?</h2><p>BAT will run perfectly fine anywhere that you can install Java. However, you may find yourself in need of a solution that's more scalable than installing it on a standalone machine or needing to run multiple versions it at the same time. In fact, a typical scenario for using BAT is as part of a Continuous Integration (CI) and Continuous Deployment (CD) process to test your API before pushing code into a shared repository and/or verifying that a deployment to production has worked correctly. With Docker we can easily package BAT in a container which is useful for portability, as Docker will help ue sneusre that our tests will run the same locally as they will when deployed to a server or used as part of a CI/CD process.</p><h2>Creating a Docker image</h2><img src="/images/posts/docker-logo.svg" alt="Docker logo"/><p>To begin with, we will need to create file called <code>Dockerfile</code> in our working directory. A Dockerfile has a file format that contains instructions and arguments, which define the contents and startup behaviour of the Docker container. To run BAT, our Dockerfile will need to contain the following:</p><pre><code># <span class="type">The</span> first instruction <span class="keyword">in</span> a <span class="type">Dockerfile</span> must be <span class="type">FROM</span>, which selects a base image. <span class="type">Since</span> it's recommended to use official <span class="type">Docker</span> images, we will use the official image <span class="keyword">for</span> maven.
<span class="type">FROM</span> maven:<span class="number">3.6</span>-jdk-<span class="number">8</span>

<span class="type">LABEL</span> maintainer=<span class="string">"https://mike.gough.me"</span>

# <span class="type">Install BAT</span> using the script provided by <span class="type">MuleSoft
RUN</span> curl -o- 'https://s3.<span class="property">amazonaws</span>.<span class="property">com</span>/bat-wrapper/install.<span class="property">sh</span>' | bash

# <span class="type">Set</span> the workdir to the <span class="keyword">default for</span> the maven image we are using
<span class="type">WORKDIR</span> /usr/src/mymaven

# <span class="type">Start BAT</span> when the container <span class="keyword">is</span> run
<span class="type">ENTRYPOINT</span> [<span class="string">"bash"</span>, <span class="string">"bat"</span>]
</code></pre><p>The above Docker file will create an image based on the official maven Docker image. It downloads and installs the latest version of BAT. To create the Docker image with the latest version of BAT, run the following command:</p><pre><code>docker build mule-blackbox-automated-testing:latest .
</code></pre><p>Thats it! In a future post we will look at how we can use our BAT container to test an API.</p><h2>References</h2><ul><li><a href="https://hub.docker.com/r/mikeyryan/mule-blackbox-automated-testing "mikeyryan/mule-blackbox-automated-testing"">Docker Hub - MuleSoft docker images</a></li><li><a href="https://docs.mulesoft.com/api-functional-monitoring/bat-install-task "BAT Installation"">Mulesoft - Install BAT</a></li><li><a href="https://github.com/Mike-Gough/mule-blackbox-automated-testing "BAT Dockerfile source code"">GitHub - Source code</a></li></ul><p class="footer">Thanks for reading! ðŸš€</p></div><ul class="share grid compact"><li><a class="twitter" href="https://twitter.com/intent/tweet?via=MikeRyanGough&text=Containerising%20MuleSoft's%20Blackbox%20Automated%20Testing%20(BAT)%20CLI%20tool&url=https://jimlearning.github.ioarticles/containerising-mule-bat">Share on Twitter</a></li><li><a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://jimlearning.github.ioarticles/containerising-mule-bat">Share on Facebook</a></li><li><a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&&titleContainerising%20MuleSoft's%20Blackbox%20Automated%20Testing%20(BAT)%20CLI%20tool=&summary=&source=&url=https://jimlearning.github.ioarticles/containerising-mule-bat">Share on LinkedIn</a></li></ul></article></div><footer class="animated fadeIn"><p>Mike Gough Â© 2020.</p><p>Powered by <a href="https://github.com/johnsundell/publish">Publish</a> and hosted on <a href="https://github.com/Mike-Gough/Mike-Gough.github.io">GitHub Pages</a>. 100% JavaScript-free.</p><p>Notice a broken link or other issue? <a href="https://github.com/Mike-Gough/Mike-Gough.github.io/issues">Open an issue!</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>