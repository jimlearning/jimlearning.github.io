<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"/><meta name="og:site_name" content="JimLearningBlog"/><link rel="canonical" href="https://jimlearning.github.io/articles/kubernetes-with-dashboard"/><meta name="twitter:url" content="https://jimlearning.github.io/articles/kubernetes-with-dashboard"/><meta name="og:url" content="https://jimlearning.github.io/articles/kubernetes-with-dashboard"/><title>Setup Kubernetes and its dashboard on Docker Desktop | JimLearningBlog</title><meta name="twitter:title" content="Setup Kubernetes and its dashboard on Docker Desktop | JimLearningBlog"/><meta name="og:title" content="Setup Kubernetes and its dashboard on Docker Desktop | JimLearningBlog"/><meta name="description" content="In this post we will walk through how you can install and run a single node Kubernetes instance using Docker Desktop Community Edition for Windows or Mac."/><meta name="twitter:description" content="In this post we will walk through how you can install and run a single node Kubernetes instance using Docker Desktop Community Edition for Windows or Mac."/><meta name="og:description" content="In this post we will walk through how you can install and run a single node Kubernetes instance using Docker Desktop Community Edition for Windows or Mac."/><meta name="twitter:card" content="summary"/><link rel="stylesheet" href="/styles.css" type="text/css"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/images/favicon.png" type="image/png"/><link rel="alternate" href="/feed.rss" type="application/rss+xml" title="Subscribe to JimLearningBlog"/></head><head><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Karla:400,400i,700,700i"/><link rel="stylesheet" href="/PersonalTheme/fontawesome/all.min.css"/></head><body class="item-page"><header><div class="wrapper"><a class="site-name" href="/">JimLearningBlog</a><p>A description of JimLearningBlog</p><nav><ul><li><a class="selected" href="/articles"><span class="far fa-newspaper"></span>Articles</a></li><li><a href="/tips"><span class="far fa-star"></span>Tips</a></li><li><a href="/apps"><span></span>Apps</a></li><li><a href="/tags"><span class="fas fa-hashtag"></span>Tags</a></li><li><a href="/about"><span class="far fa-user"></span>About Me</a></li></ul></nav></div></header><div class="wrapper"><article class="animated fadeIn"><span class="date">Published on 2019å¹´05æœˆ16æ—¥.</span><span class="read-time">ðŸ•‘ 5 minutes read.</span><h1>Setup Kubernetes and its dashboard on Docker Desktop</h1><ul class="tag-list"><li class="tag variant-0"><a href="/tags/articles">Articles</a></li><li class="tag variant-3"><a href="/tags/docker">Docker</a></li><li class="tag variant-7"><a href="/tags/kubernetes">Kubernetes</a></li></ul><p>In this post we will walk through how you can install and run a single node Kubernetes instance using Docker Desktop Community Edition for Windows or Mac.</p><div class="content"><h2>Prerequisites</h2><p>To keep things simple, we will assume you have access to a bash Command Line Interface (CLI) on your local machine. Mac users should have access to the <em>Terminal</em> application while Windows users will need to install one of several options, including but not limited to:</p><ul><li><a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10">Windows subsystem for Linux</a></li><li><a href="https://gitforwindows.org">Git for Windows (Git Bash)</a></li></ul><h2>What is Kubernetes</h2><p>Kubernetes (K8s) is a portable open source platform for automating the deployment, scaling and management of containerised applications. The name Kubernetes originates from the Greek language, meaning helmsman or pilot and is the root of the words governor and cybernetic. It emerged from the need for declarative configuration for the orchestration of containers, which had just been popularised by Docker. Although Docker provided a simple way to package, distributed and deploy applications, its focus on single machine left a gap for management at enterprise or cloud scales.</p><p>K8s can be thought of as:</p><ul><li>a container platform;</li><li>a microservices platform; and</li><li>a portable cloud platform.</li></ul><p>It's ability to orchestrate computing, networking, and storage infrastructure on behalf of user workloads makes it particularly well suited for hosting distributed applications such as an Enterprise Service Bus (ESB).</p><h2>Install Docker Desktop</h2><img src="/images/posts/docker-logo.svg" alt="Docker logo"/><p>If you want to get started with Kubernetes on a Windows 10 or Mac OS operating system, Docker Desktop is the quickest way. Docker Desktop comes in two editions, a free community edition and a paid enterprise edition. It includes everything you need to build, test and ship containerised applications right from your machine and for this walkthrough, either edition will be suitable. To obtain a copy, head to the <a href="https://www.docker.com/products/docker-desktop">Docker website</a>, and follow the instructions to download and install it.</p><p>Once installed, you can verify that Docker is up and running by opening your CLI of choice and executing the following command:</p><pre><code class="language-bash">docker version
</code></pre><p>If successful, you should seen some output printed to the screen similar to this:</p><pre><code class="language-plaintext">Client: Docker Engine - Community
 Version:           18.09.2
 API version:       1.39
 Go version:        go1.10.8
 Git commit:        6247962
 Built:             Sun Feb 10 04:12:39 2019
 OS/Arch:           darwin/amd64
 Experimental:      false

Server: Docker Engine - Community
 Engine:
  Version:          18.09.2
  API version:      1.39 (minimum version 1.12)
  Go version:       go1.10.6
  Git commit:       6247962
  Built:            Sun Feb 10 04:13:06 2019
  OS/Arch:          linux/amd64
  Experimental:     true
 Kubernetes:
  Version:          v1.10.11
  StackAPI:         v1beta2
</code></pre><h2>Install Kubernetes</h2><img src="/images/posts/kubernetes-logo.svg" alt="Kubernetes logo"/><p>Once Docker Desktop is installed, you should see a whale icon in the taskbar for Windows or the menu bar for Mac. Clicking the icon should reveal a content menu with an option for <em>Settings</em> or <em>Preferences</em> depending on your Operating System, select it. Once open, navigate to the Kubernetes tab. Kubernetes is not installed by Docker Desktop by default, you'll need to check the <em>Enable Kubernetes</em> checkbox and wait for it to be downloaded and installed before proceeding. The amount of time this will take largely depends on your internet speed, once the window shows <em>Kubernetes is running</em>, you should be ready to continue.</p><p>Once enabled, you can verify that Kubernetes is available by opening your CLI of choice and executing the following command:</p><pre><code class="language-bash">kubectl version
</code></pre><p>If successful, you should seen some output printed to the screen similar to this:</p><pre><code class="language-plaintext">Client Version: version.Info{Major:"1", Minor:"10", GitVersion:"v1.10.11", GitCommit:"637c7e288581ee40ab4ca210618a89a555b6e7e9", GitTreeState:"clean", BuildDate:"2018-11-26T14:38:32Z", GoVersion:"go1.9.3", Compiler:"gc", Platform:"darwin/amd64"}
Server Version: version.Info{Major:"1", Minor:"10", GitVersion:"v1.10.11", GitCommit:"637c7e288581ee40ab4ca210618a89a555b6e7e9", GitTreeState:"clean", BuildDate:"2018-11-26T14:25:46Z", GoVersion:"go1.9.3", Compiler:"gc", Platform:"linux/amd64"}
</code></pre><p>This will have resulted in Docker Desktop setting up a single node Kubernetes cluster on your local machine.</p><h2>Installing the Kubernetes Dashboard</h2><p>Dashboard is an official web-based user interface for Kubernetes. It can be used as an alternative to the CLI for those that prefer to work with a Graphical User Interface (GUI). At a high level, it features the ability to deploy, troubleshoot and manage resources for Kubernetes clusters. In particular, it can be used to get an overview of running applications and to perform common tasks such as scaling a deployment, initiate a rolling update, restarting a pod or deploying new applications.</p><p>Although the Dashboard is the official GUI for Kubernetes, it is not deployed by default. To deploy it to your single node Kubernetes cluster, run the following command:</p><pre><code class="language-bash">kubectl apply \
  -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.0.0-beta8/aio/deploy/recommended.yaml
</code></pre><p>To make the deployed Dashboard accessible, use the kubectl command-line tool by running the following command:</p><pre><code class="language-bash">kubectl proxy
</code></pre><p>You will then be able to navigate to <a href="http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/">http://localhost:8001/api/v1/namespaces/kubernetes-dashboard/services/https:kubernetes-dashboard:/proxy/</a> in your browser to access the dashboard.</p><h2>Setting up a Dashboard user</h2><p>Navigating to the Dashboard will have presented a screen asking for a Kubeconfig file or an access token. To use the Dashboard, you'll need to create a user and obtain a bearer token for them. Begin by creating a file called <code>dashboard-admin-user.yaml</code> with the following contents:</p><pre><code class="language-yaml">apiVersion: v1
kind: ServiceAccount
metadata:
  name: admin-user
  namespace: kube-system
</code></pre><p>Then navigate to the location you saved the file in your CLI and use the following command to create the admin user:</p><pre><code class="language-bash">kubectl apply \
  -f dashboard-admin-user.yaml
</code></pre><p>Finally, to obtain a bearer token, you'll need to run the following command:</p><pre><code class="language-bash">kubectl -n kube-system describe secret \
  $(kubectl -n kube-system get secret | grep admin-user | awk '{print $1}')
</code></pre><p>It should print some output to the screen like this:</p><pre><code class="language-plaintext">Name:         admin-user-token-m9nr5
Namespace:    kube-system
Labels:       &lt;none&gt;
Annotations:  kubernetes.io/service-account.name=admin-user
              kubernetes.io/service-account.uid=b9b37a57-812d-11e9-9877-025000000001

Type:  kubernetes.io/service-account-token

Data
====
ca.crt:     1025 bytes
namespace:  11 bytes
token:      eyJhbGciOiJSUzI1NiIsImtpZCI6IiJ9.eyJpc3MiOiJrdWJlcm5ldGVzL3NlcnZpY2VhY2NvdW50Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9uYW1lc3BhY2UiOiJrdWJlLXN5c3RlbSIsImt1YmVybmV0ZXMuaW8vc2VydmljZWFjY291bnQvc2VjcmV0Lm5hbWUiOiJhZG1pbi11c2VyLXRva2VuLW05bnI1Iiwia3ViZXJuZXRlcy5pby9zZXJ2aWNlYWNjb3VudC9zZXJ2aWNlLWFjY291bnQubmFtZSI6ImFkbWluLXVzZXIiLCJrdWJlcm5ldGVzLmlvL3NlcnZpY2VhY2NvdW50L3NlcnZpY2UtYWNjb3VudC51aWQiOiJiOWIzN2E1Ny04MTJkLTExZTktOTg3Ny0wMjUwMDAwMDAwMDEiLCJzdWIiOiJzeXN0ZW06c2VydmljZWFjY291bnQ6a3ViZS1zeXN0ZW06YWRtaW4tdXNlciJ9.EZ37ihKfHBszN1Ujz6EgDj143Q-hUKtWUyo1s88D0-WCwdtnmdZLUyvg4d5H6NmZo7AbrkPrNHXOLy45piU9ghQHejicz5SBLI_JtPFO68BxOiGv7MuNYAAHJO82y-NNbTDjfx6Rbj9RK5-pWoHO9eOSvHa-XDC0OH3Usj4gjjVdXhf5uBl3meKPtUwlaXX0ziaIMoDmfHLw43vqugpJDyNMXkcil0s0NzFFlPBLu4enPx_TEuJp0pKsBEKXDNgB9amSmljD7ovdNd9ocIA7kNBe3SSctTkqxYqOrABuaC3KDmCGzCOGRboDUJEL8FP3HtbimsXCm8jXKzqo-5a_YA
</code></pre><h2>Accessing the Dashboard</h2><p>Copy the token that was printed to the screen, navigate back to the browser window we opened earlier and select the option <em>Token</em>. Paste the token into the password field shown on the screen and press the <em>Sign in</em> button. Thatâ€™s it! You should now be able to access Kubernetes Dashboard as shown below:</p><img src="/images/posts/kubernetes-dashboard.png" alt="Kubernetes Dashboard"/><h2>References</h2><ul><li><a href="https://kubernetes.io/docs/tasks/access-application-cluster/web-ui-dashboard/ "Web UI (Dashboard)"">Web UI (Dashboard)</a></li><li><a href="https://github.com/kubernetes/dashboard/wiki/Creating-sample-user "Creating sample user"">Creating sample user</a></li><li><a href="https://kubernetes.io/docs/concepts/overview/what-is-kubernetes/ "What is kubernetes"">What is Kubernetes</a></li></ul><p class="footer">Thanks for reading! ðŸš€</p></div><ul class="share grid compact"><li><a class="twitter" href="https://twitter.com/intent/tweet?via=MikeRyanGough&text=Setup%20Kubernetes%20and%20its%20dashboard%20on%20Docker%20Desktop&url=https://jimlearning.github.ioarticles/kubernetes-with-dashboard">Share on Twitter</a></li><li><a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=https://jimlearning.github.ioarticles/kubernetes-with-dashboard">Share on Facebook</a></li><li><a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&&titleSetup%20Kubernetes%20and%20its%20dashboard%20on%20Docker%20Desktop=&summary=&source=&url=https://jimlearning.github.ioarticles/kubernetes-with-dashboard">Share on LinkedIn</a></li></ul></article></div><footer class="animated fadeIn"><p>Mike Gough Â© 2020.</p><p>Powered by <a href="https://github.com/johnsundell/publish">Publish</a> and hosted on <a href="https://github.com/Mike-Gough/Mike-Gough.github.io">GitHub Pages</a>. 100% JavaScript-free.</p><p>Notice a broken link or other issue? <a href="https://github.com/Mike-Gough/Mike-Gough.github.io/issues">Open an issue!</a></p><p><a href="/feed.rss">RSS feed</a></p></footer></body></html>